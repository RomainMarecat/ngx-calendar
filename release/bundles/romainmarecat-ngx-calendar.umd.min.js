!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/flex-layout"),require("@angular/material"),require("@angular/core"),require("moment"),require("twix")):"function"==typeof define&&define.amd?define("@romainmarecat/ngx-calendar",["exports","@angular/common","@angular/flex-layout","@angular/material","@angular/core","moment","twix"],e):e((t.romainmarecat=t.romainmarecat||{},t.romainmarecat["ngx-calendar"]={}),t.ng.common,t.ng["flex-layout"],t.ng.material,t.ng.core,t.moment)}(this,function(t,e,n,s,i,a){"use strict";function o(){}var r={absence:0,session:1};r[r.absence]="absence",r[r.session]="session";var l=a,d=(u.prototype.onNextDay=function(){var t=1;"week"===this.viewMode&&(t=7),this.start=l(this.start).add(t,"day"),this.startChanged.emit(this.start)},u.prototype.isAllSlotNotAvailable=function(){var e=this;if(this.days&&0<this.days.length)return 0===this.days.filter(function(t){return 0<e.daysAvailability.get(t.key).length}).length},u.prototype.getAvailabilities=function(t){return this.daysAvailability.get(t)},u.prototype.getSessionTitle=function(t,e){var n=t.value.format("YYYY-MM-DD")+e;if(this.sessions&&this.sessions.has(n)){var s=this.sessions.get(n);return l(s.start).format("HH:mm")+" - "+l(s.end).format("HH:mm")}return""},u.prototype.getSessionTooltip=function(t,e){var n=t.value.format("YYYY-MM-DD")+e;if(this.sessions&&this.sessions.has(n)){var s=this.sessions.get(n);if(s.details.info)return s.details.info}return""},u.prototype.onTimeSlotClicked=function(t,e){var n=t.value.format("YYYY-MM-DD")+e;if(this.isSlotBusy(t,e)||this.isSlotEarly(t,e))this.slotLocked.emit(!0);else if(this.isDateTimeInSessionsFromCurrentUser(t,e)||this.isSlotInSession(t,e)){if(this.sessions.has(n)){var s={key:n,session:this.sessions.get(n)};this.removeSession(s)}}else{var i=l(n,"YYYY-MM-DDHH:mm"),a=i.clone().add(this.onlineSession.session_type.duration,"minutes");this.addSession(i,a)}},u.prototype.addSession=function(t,e){Date.prototype.toJSON=function(){return l(this).format()};var n={start:t.toDate(),end:e.toDate(),pause:this.onlineSession.session_type.pause,details:{duration:this.onlineSession.session_type.duration,nb_persons:1,event_type:r.session,info:this.bodyConfiguration.calendar.session.info},user:{uid:this.user.uid,displayName:this.user.displayName,email:this.user.email}};this.sessionAdded.emit(n)},u.prototype.removeSession=function(t){this.sessionRemoved.emit(t)},u.prototype.isDayBusy=function(t,e){var n=t.value.format("YYYY-MM-DD")+e;return this.daysBusySlotNumber&&this.daysAvailabilitySlotNumber&&this.daysBusySlotNumber.has(n)&&this.daysAvailabilitySlotNumber.has(n)&&this.daysBusySlotNumber.get(n)>=this.daysAvailabilitySlotNumber.get(n)},u.prototype.isSlotBusy=function(t,e){var n=t.value.format("YYYY-MM-DD")+e;return this.busySlots&&this.busySlots.has(n)},u.prototype.isSlotEarly=function(t,e){var n=t.value.format("YYYY-MM-DD")+e;return this.earlySlots&&this.earlySlots.has(n)||this.pauseSlots&&this.pauseSlots.has(n)},u.prototype.isSlotInSession=function(t,e){var n=t.value.format("YYYY-MM-DD")+e;return this.sessionsSlots&&this.sessionsSlots.has(n)},u.prototype.isDateTimeInSessionsFromCurrentUser=function(t,e){var n=t.value.format("YYYY-MM-DD")+e;return this.sessions&&this.sessions.has(n)},u.prototype.isSlotSessionEnd=function(t,e){var n=t.value.format("YYYY-MM-DD")+e;return this.sessionsEndSlots&&this.sessionsEndSlots.has(n)},u.decorators=[{type:i.Component,args:[{selector:"lib-calendar-body",template:'<div class="calendar-body-wrapper">\n  <table class="calendar-body-table-wrapper table table-bordered">\n    <thead class="calendar-body-table-head">\n    <tr class="calendar-body-head-day-row"\n        *ngIf="viewMode !== \'day\'">\n      <th class="calendar-body-day-header text-center"\n          *ngFor="let day of days">\n        <span class="truncate">{{ day.title }}</span>\n      </th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr class="calendar-body-row">\n      <td class="calendar-body-column-content text-center"\n          [attr.id]="day.key"\n          *ngFor="let day of days; let keyDay = index">\n        <div class="time-slot"\n             [class.busy]="isSlotBusy(day, time)"\n             [class.early]="isSlotEarly(day, time)"\n             [class.session]="isSlotInSession(day, time)"\n             [class.session-start]="isDateTimeInSessionsFromCurrentUser(day, time)"\n             [class.session-end]="isSlotSessionEnd(day, time)"\n             *ngFor="let time of getAvailabilities(day.key)">\n          <div class="time-content">\n            <button type="button"\n                    class="slot-available"\n                    (click)="onTimeSlotClicked(day, time)"\n                    *ngIf="!isDateTimeInSessionsFromCurrentUser(day, time); else sessionTitle">\n              <span class="default-time">{{ time }}</span>\n            </button>\n            <ng-template #sessionTitle>\n              <button type="button"\n                      class="slot-session">\n                {{ getSessionTitle(day, time)}}\n              </button>\n            </ng-template>\n            <a class="link-close" (click)="onTimeSlotClicked(day, time)">\n              <mat-icon class="icon-close"\n                        *ngIf="isDateTimeInSessionsFromCurrentUser(day, time)">\n                close\n              </mat-icon>\n            </a>\n          </div>\n          <div class="slot-busy"\n               *ngIf="getAvailabilities(day.key).length <= 0 || isDayBusy(day, time)">\n            <span>{{bodyConfiguration.calendar.availability.empty}}</span>\n          </div>\n        </div>\n        <div class="next-slot"\n             *ngIf="isAllSlotNotAvailable() && keyDay === days.length-1">\n          <button type="button"\n                  role="button"\n                  [title]="bodyConfiguration.calendar.availability.slot"\n                  (click)="onNextDay()">\n            <span>{{ bodyConfiguration.calendar.availability.slot }}</span>\n            <mat-icon>keyboard_arrow_right</mat-icon>\n          </button>\n        </div>\n      </td>\n    </tr>\n    </tbody>\n  </table>\n</div>\n',styles:[".calendar-body-wrapper .calendar-body-column-content{max-width:240px}.calendar-body-wrapper .calendar-body-column-content .time-slot{padding:5px}.calendar-body-wrapper .calendar-body-column-content .time-slot button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);font-family:Lato,Roboto,sans-serif;font-size:14px;font-weight:500}.calendar-body-wrapper .calendar-body-column-content .time-slot button.slot-available{cursor:pointer;width:120px}.calendar-body-wrapper .calendar-body-column-content .time-slot:hover button.slot-available{background-color:#006400;color:#fff}.calendar-body-wrapper .calendar-body-column-content .time-slot.busy{display:none}.calendar-body-wrapper .calendar-body-column-content .time-slot.busy button.slot-available{color:#8b0000;cursor:not-allowed}.calendar-body-wrapper .calendar-body-column-content .time-slot.early button.slot-available{cursor:not-allowed;color:orange}.calendar-body-wrapper .calendar-body-column-content .time-slot.session .time-content{position:relative;padding:5px 5px 5px 0}.calendar-body-wrapper .calendar-body-column-content .time-slot.session .time-content .slot-session{width:120px;background-color:#ff8c00}.calendar-body-wrapper .calendar-body-column-content .time-slot.session .time-content .link-close .icon-close{position:absolute;right:5px;top:6px;font-size:14px}.calendar-body-wrapper .calendar-body-column-content .time-slot.session .time-content .link-close,.calendar-body-wrapper .calendar-body-column-content .time-slot.session .time-content .link-close:hover{cursor:pointer}.calendar-body-wrapper .calendar-body-column-content .time-slot.session-start{border-top-left-radius:3px;border-top-right-radius:3px}.calendar-body-wrapper .calendar-body-column-content .time-slot.session-start .slot-session{color:#000;cursor:text}.calendar-body-wrapper .calendar-body-column-content .time-slot.session-end{border-bottom-left-radius:3px;border-bottom-right-radius:3px}"]}]}],u.propDecorators={user:[{type:i.Input}],onlineSession:[{type:i.Input}],viewMode:[{type:i.Input}],start:[{type:i.Input}],end:[{type:i.Input}],days:[{type:i.Input}],daysAvailability:[{type:i.Input}],daysBusySlotNumber:[{type:i.Input}],daysAvailabilitySlotNumber:[{type:i.Input}],busySlots:[{type:i.Input}],earlySlots:[{type:i.Input}],pauseSlots:[{type:i.Input}],sessionsSlots:[{type:i.Input}],sessionsEndSlots:[{type:i.Input}],sessions:[{type:i.Input}],bodyConfiguration:[{type:i.Input}],sessionAdded:[{type:i.Output}],sessionRemoved:[{type:i.Output}],startChanged:[{type:i.Output}],endChanged:[{type:i.Output}],slotLocked:[{type:i.Output}]},u);function u(){this.sessionAdded=new i.EventEmitter,this.sessionRemoved=new i.EventEmitter,this.startChanged=new i.EventEmitter,this.endChanged=new i.EventEmitter,this.slotLocked=new i.EventEmitter}var c=a,y=(Object.defineProperty(p.prototype,"viewMode",{get:function(){return this._viewMode},set:function(t){this.switchView(t)},enumerable:!0,configurable:!0}),p.prototype.switchView=function(t){this._viewMode=t,this.onSwitchedView(t)},p.prototype.onSwitchedView=function(t){this.switchedView.emit(t)},p.prototype.onStartChanged=function(t){this.startChanged.emit(t)},p.prototype.goToToday=function(){this.start=c(),this.onStartChanged(this.start)},p.prototype.isToday=function(){return c()===c(this.start)},p.prototype.previousDay=function(){var t=1;"week"===this.viewMode&&(t=7),this.start=c(this.start).subtract(t,"day"),this.onStartChanged(this.start)},p.prototype.nextDay=function(){var t=1;"week"===this.viewMode&&(t=7),this.start=c(this.start).add(t,"day"),this.onStartChanged(this.start)},p.decorators=[{type:i.Component,args:[{selector:"lib-calendar-header",template:'<div fxLayout="row wrap"\n     fxLayoutAlign="space-between stretch"\n     fxLayout.xs="column"\n     fxLayoutAlign.xs="start center"\n     fxLayoutGap.xs="10px"\n     *ngIf="headerConfiguration">\n\n  <div class="left-actions"\n       fxLayout="row"\n       fxLayoutAlign="start stretch"\n       fxLayoutGap="10px"\n       fxLayout.xs="row"\n       fxLayoutAlign.xs="center stretch"\n       fxLayoutGap.xs="10px">\n    <button class="button-actions"\n            (click)="previousDay()"\n            type="button"\n            role="button"\n            [title]="headerConfiguration.calendar.cta.previous">\n      <mat-icon>keyboard_arrow_left</mat-icon>\n    </button>\n    <button class="button-actions"\n            (click)="nextDay()"\n            type="button"\n            role="button"\n            [title]="headerConfiguration.calendar.cta.next">\n      <mat-icon>keyboard_arrow_right</mat-icon>\n    </button>\n    <button class="button-actions"\n            [title]="headerConfiguration.calendar.back_today"\n            [disabled]="isToday()"\n            (click)="goToToday()"\n            role="button">\n      <mat-icon>today</mat-icon>\n    </button>\n  </div>\n  <div class="right-actions"\n       fxLayout="row wrap"\n       fxLayoutAlign="end stretch"\n       fxLayoutGap="10px"\n       fxLayout.xs="row wrap"\n       fxLayoutAlign.xs="center stretch"\n       fxLayoutGap.xs="10px">\n    <button class="button-actions"\n            type="button"\n            role="button"\n            [title]="headerConfiguration.calendar.today"\n            [disabled]="true"\n            [class.hide-on-small-only]="end?.format(\'YYYY-MM-DD\') !== start?.format(\'YYYY-MM-DD\')">\n      <span>{{ start?.format(\'LL\') }}</span>\n      <span *ngIf="end?.format(\'YYYY-MM-DD\') !== start?.format(\'YYYY-MM-DD\')">\n        - {{ end?.format(\'LL\') }}\n      </span>\n    </button>\n    <button class="button-actions"\n            type="button"\n            role="button"\n            [title]="headerConfiguration.calendar.week"\n            [class.active]="viewMode === \'week\'"\n            (click)="switchView(\'week\')"\n            fxHide.lt-md="true">\n      <mat-icon>view_week</mat-icon>\n      <span fxHide.lt-md="true">{{ headerConfiguration.calendar.week }}</span>\n    </button>\n    <button class="button-actions"\n            type="button"\n            role="button"\n            [title]="headerConfiguration.calendar.three_days"\n            [class.active]="viewMode === \'three_days\'"\n            (click)="switchView(\'three_days\')"\n            fxHide.lt-md="true">\n      <mat-icon>view_column</mat-icon>\n      <span fxHide.lt-md="true">{{ headerConfiguration.calendar.three_days }}</span>\n    </button>\n    <button class="button-actions"\n            type="button"\n            role="button"\n            [title]="headerConfiguration.calendar.day"\n            [class.active]="viewMode === \'day\'"\n            (click)="switchView(\'day\')"\n            fxHide.lt-md="true">\n      <mat-icon>view_day</mat-icon>\n      <span fxHide.lt-md="true">{{ headerConfiguration.calendar.day }}</span>\n    </button>\n  </div>\n</div>\n',styles:[".button-actions span{margin-left:5px}button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:36px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);font-family:Lato,Roboto,sans-serif;font-size:14px;font-weight:500;display:inline-flex;align-items:center;justify-content:center}"]}]}],p.propDecorators={start:[{type:i.Input}],end:[{type:i.Input}],switchedView:[{type:i.Output}],startChanged:[{type:i.Output}],headerConfiguration:[{type:i.Input}],viewMode:[{type:i.Input}]},p);function p(){this.switchedView=new i.EventEmitter,this.startChanged=new i.EventEmitter}var m=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var s,i,a=n.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(s=a.next()).done;)o.push(s.value)}catch(r){i={error:r}}finally{try{s&&!s.done&&(n=a["return"])&&n.call(a)}finally{if(i)throw i.error}}return o},h=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t},f=a,b=(Object.defineProperty(v.prototype,"sessionsEntries",{get:function(){return this._sessionsEntries},set:function(t){t.length&&(this._sessionsEntries=t,this.loadCalendar())},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"viewMode",{get:function(){return this._viewMode},set:function(t){this._viewMode=t,this.setViewMode()},enumerable:!0,configurable:!0}),v.splitRangeToNextTime=function(t,e){var n=t.next();return{time:n,mmtTime:v.getMinutesDifference(f(n.toDate()),e)}},v.getMinutesDifference=function(t,e){return t.minutes()%e!=0&&t.minutes(t.minutes()-t.minutes()%e),t},v.geStartEndFromStartAndSessionDuration=function(t,e,n){return t.twix(e).iterate(n,"minutes"),{start:t,end:e}},v.prototype.ngOnChanges=function(){this.loadCalendar()},v.prototype.setCalendar=function(){this.sessionsSlots=new Set,this.sessionsEndSlots=new Set,this.earlySlots=new Set,this.pauseSlots=new Set,this.sessions=new Map},v.prototype.setViewMode=function(){return"day"===this.viewMode?this.end=this.start:"three_days"===this.viewMode?this.end=f(this.start).add(2,"days"):(this.start||(this.start=f()),this.start=f(this.start).day(0),this.end=f(this.start).add(6,"days")),this.calendarStart=f(this.start).startOf("day"),void(this.calendarEnd=f(this.end).endOf("day"))},v.prototype.loadCalendar=function(){this.setCalendar(),this.setViewMode(),this.loadEvents(this.start,this.end),this.setDateRange(this.start,this.end),this.loadAvailabilities()},v.prototype.setDateRange=function(t,e){this.daysAvailability=new Map;var n=t.twix(e).iterate(1,"days");for(this.days=[];n.hasNext();){var s=n.next();this.days.push({title:s.format("DD/MM/YYYY"),key:s.format("YYYY-MM-DD"),value:f(s.toDate())}),this.daysAvailability.set(s.format("YYYY-MM-DD"),[])}},v.prototype.onSwithedView=function(t){this.viewMode=t,this.viewModeChanged.emit(t),this.loadCalendar()},v.prototype.onStartChanged=function(t){this.start=t,this.loadCalendar()},v.prototype.onSessionAdded=function(t){this.sessions.set(f(t.start).format("YYYY-MM-DDHH:mm"),t),this.addSession(t),this.sessionCreated.emit(t)},v.prototype.onSessionRemoved=function(t){this.sessions["delete"](t.key),this.removeSession(t.session),this.sessionRemoved.emit(t.session)},v.prototype.loadAvailabilities=function(){var d=this;if(this.daysAvailability&&this.onlineSession){this.realDuration=this.onlineSession.session_type.duration;var u=f(this.onlineSession.date_range.start,"YYYY-MM-DD").startOf("day"),c=f(this.onlineSession.date_range.end,"YYYY-MM-DD").endOf("day");this.daysAvailabilitySlotNumber=new Map,this.daysAvailability.forEach(function(t,e){var n=0,s=f(e,"YYYY-MM-DD").hour(8),i=f(e+d.onlineSession.time_range.start,"YYYY-MMDDHH:mm");if(!i.isBefore(f().startOf("day"))){var a=f().add(d.onlineSession.session_type.booking_delay,"hours"),o=f(e+d.onlineSession.time_range.end,"YYYY-MM-DDHH:mm");o.subtract(d.realDuration,"minutes");var r=i.twix(o).iterate(d.onlineSession.session_type.duration,"minutes");if(d.calendarStart&&d.calendarEnd&&s.isBetween(u,c))for(;r.hasNext();){var l=r.next();f(l.toDate()).isBefore(a)||(t.push(l.format("HH:mm")),n++)}d.daysAvailabilitySlotNumber.set(e,n)}})}},v.prototype.addSession=function(t){for(var e=f(t.start),n=f(t.end),s=e.twix(n).iterateInner(t.details.duration,"minutes");s.hasNext();){var i=s.next();this.sessionsSlots.add(i.format("YYYY-MM-DDHH:mm")),s.hasNext()||this.sessionsEndSlots.add(i.format("YYYY-MM-DDHH:mm"))}var a=e.clone().subtract(this.realDuration,"minutes");a.minutes(a.minutes()-a.minutes()%t.details.duration+t.details.duration);for(var o=a.twix(e).iterate(t.details.duration,"minutes");o.hasNext();)i=o.next(),(u=v.getMinutesDifference(f(i.toDate()),t.details.duration)).isSameOrAfter(a)&&u.isBefore(e)&&this.earlySlots.add(u.format("YYYY-MM-DDHH:mm"));var r=n.clone();r.subtract(r.minutes()%t.details.duration);for(var l=r.clone().add(t.pause,"minutes"),d=r.twix(l).iterate(t.details.duration,"minutes");d.hasNext();){var u;i=d.next(),(u=v.getMinutesDifference(f(i.toDate()),t.details.duration)).isSameOrAfter(r)&&u.isBefore(l)&&this.pauseSlots.add(u.format("YYYY-MM-DDHH:mm"))}},v.prototype.removeSession=function(t){for(var e=f(t.start),n=f(t.end),s=e.twix(n).iterate(t.details.duration,"minutes");s.hasNext();){var i=s.next();this.sessionsSlots["delete"](i.format("YYYY-MM-DDHH:mm")),s.hasNext()||this.sessionsEndSlots["delete"](i.format("YYYY-MM-DDHH:mm"))}var a=e.clone().subtract(this.realDuration,"minutes");a.minutes(a.minutes()-a.minutes()%t.details.duration+t.details.duration);for(var o=a.twix(e).iterate(t.details.duration,"minutes");o.hasNext();)i=o.next(),(u=v.getMinutesDifference(f(i.toDate()),t.details.duration)).isSameOrAfter(a)&&u.isBefore(e)&&this.earlySlots["delete"](u.format("YYYY-MM-DDHH:mm"));if(t.pause){var r=n.clone();r.subtract(r.minutes()%t.details.duration);for(var l=r.clone().add(t.pause,"minutes"),d=r.twix(l).iterate(t.details.duration,"minutes");d.hasNext();){var u;i=d.next(),(u=v.getMinutesDifference(f(i.toDate()),t.details.duration)).isSameOrAfter(r)&&u.isBefore(l)&&this.pauseSlots["delete"](u.format("YYYY-MM-DDHH:mm"))}}},v.prototype.loadEvents=function(n,s){var i=this;this.busySlots=new Set,this.daysBusySlotNumber=new Map,Array.isArray(this._sessionsEntries)&&this._sessionsEntries.length&&(this._sessionsEntries=h(this._sessionsEntries.filter(function(t){if(f(t.start).isSameOrAfter(n)&&f(t.end).isSameOrBefore(s)){var e=f(t.start,"YYYY-MM-DDHH:mm");return e=i.buildinBusySlot(e,t),i.buildingEarliestSlot(e),!0}return!1}))),this.cd.markForCheck()},v.prototype.buildinBusySlot=function(t,e){var n=f(e.end,"YYYY-MM-DDHH:mm");if(!(t&&t.isValid()&&n&&n.isValid()&&t.isBefore(n)))return console.error("invalid dates"),null;for(var s=t.twix(n).iterate(e.details.duration,"minutes");s.hasNext();){var i=v.splitRangeToNextTime(s,e.details.duration),a=i.time;if(i.mmtTime,this.daysAvailability&&this.daysAvailability.has(a.format("YYYY-MM-DD"))&&!this.busySlots.has(a.format("YYYY-MM-DDHH:mm"))&&0<=this.daysAvailability.get(a.format("YYYY-MM-DD")).indexOf(a.format("HH:mm"))){if(!e.user||e.user&&e.user.uid!==this.user.uid){var o=this.daysBusySlotNumber.has(a.format("YYYY-MM-DD"))?this.daysBusySlotNumber.get(a.format("YYYY-MM-DD")):0;o++,this.daysBusySlotNumber.set(a.format("YYYY-MM-DD"),o),this.busySlots.add(a.format("YYYY-MM-DDHH:mm"))}e.user&&e.user.uid===this.user.uid&&(this.sessionsSlots.add(a.format("YYYY-MM-DDHH:mm")),this.sessions.set(a.format("YYYY-MM-DDHH:mm"),e),s.hasNext()||this.sessionsEndSlots.add(a.format("YYYY-MM-DDHH:mm")))}}return t},v.prototype.buildingEarliestSlot=function(t){var e=t.clone().subtract(this.realDuration,"minutes");e.minutes(e.minutes()-e.minutes()%this.onlineSession.session_type.duration+this.onlineSession.session_type.duration);for(var n=e.twix(t).iterate(this.onlineSession.session_type.duration,"minutes");n.hasNext();){var s=v.splitRangeToNextTime(n,this.onlineSession.session_type.duration),i=s.time;if(s.mmtTime,this.daysAvailability&&this.daysAvailability.has(i.format("YYYY-MM-DD"))&&!this.busySlots.has(i.format("YYYY-MM-DDHH:mm"))&&0<=this.daysAvailability.get(i.format("YYYY-MM-DD")).indexOf(i.format("HH:mm"))){var a=this.daysBusySlotNumber.has(i.format("YYYY-MM-DD"))?this.daysBusySlotNumber.get(i.format("YYYY-MM-DD")):0;a++,this.daysBusySlotNumber.set(i.format("YYYY-MM-DD"),a)}this.busySlots.add(i.format("YYYY-MM-DDHH:mm"))}},v.decorators=[{type:i.Component,args:[{selector:"ngx-calendar",template:'<div class="week-calendar-wrapper">\n  <div class="week-calendar-header">\n\n\n    <div class="week-calendar-title">\n\n\n      <lib-calendar-header [start]="start"\n                           [end]="end"\n                           [headerConfiguration]="calendarConfiguration"\n                           [viewMode]="viewMode"\n                           (switchedView)="onSwithedView($event)"\n                           (startChanged)="onStartChanged($event)"></lib-calendar-header>\n\n    </div>\n\n  </div>\n\n  <div>\n\n\n    <lib-calendar-body [bodyConfiguration]="calendarConfiguration"\n                       [onlineSession]="onlineSession"\n                       [days]="days"\n                       [viewMode]="viewMode"\n                       [start]="start"\n                       [end]="end"\n                       [daysAvailability]="daysAvailability"\n                       [daysBusySlotNumber]="daysBusySlotNumber"\n                       [daysAvailabilitySlotNumber]="daysAvailabilitySlotNumber"\n                       [busySlots]="busySlots"\n                       [user]="user"\n                       [earlySlots]="earlySlots"\n                       [pauseSlots]="pauseSlots"\n                       [sessionsSlots]="sessionsSlots"\n                       [sessionsEndSlots]="sessionsEndSlots"\n                       [sessions]="sessions"\n                       (startChanged)="onStartChanged($event)"\n                       (sessionAdded)="onSessionAdded($event)"\n                       (sessionRemoved)="onSessionRemoved($event)"\n                       *ngIf="start && end && days && viewMode"></lib-calendar-body>\n\n  </div>\n</div>\n',styles:[".week-calendar-wrapper .week-calendar-header{padding-bottom:20px}@media (min-width:768px){.week-calendar-wrapper .week-calendar-header .week-calendar-title{width:90vw}}"]}]}],v.ctorParameters=function(){return[{type:i.ChangeDetectorRef}]},v.propDecorators={user:[{type:i.Input}],onlineSession:[{type:i.Input}],start:[{type:i.Input}],end:[{type:i.Input}],calendarConfiguration:[{type:i.Input}],viewModeChanged:[{type:i.Output}],sessionCreated:[{type:i.Output}],sessionRemoved:[{type:i.Output}],sessionsEntries:[{type:i.Input}],viewMode:[{type:i.Input}]},v);function v(t){this.cd=t,this.onlineSession={key:null,session_type:{name:"",max_persons:1,booking_delay:1,duration:15,pause:0},prices:[10,20],date_range:{start:"2019-01-01",end:"2030-12-31"},time_range:{start:"08:00",end:"19:00"}},this.calendarConfiguration={calendar:{cta:{next:"suivant",previous:"précédent"},today:"aujourd'hui",back_today:"revenir à la date d'aujourd'hui",day:"jour",three_days:"3 jours",week:"semaine",title:"réserver votre créneau",subtitle:"toutes les disponibilités",availability:{empty:"Aucune disponibilité",slot:"Prochaine disponibilité"},session:{info:"Créneau vérrouillé"}}},this.viewModeChanged=new i.EventEmitter,this.sessionCreated=new i.EventEmitter,this.sessionRemoved=new i.EventEmitter,this.days=[],this._sessionsEntries=[],this._viewMode="week"}var Y=(g.decorators=[{type:i.NgModule,args:[{imports:[e.CommonModule,n.FlexLayoutModule,s.MatIconModule],declarations:[b,y,d],exports:[b,y,d]}]}],g);function g(){}var w,S,M=((this&&this.__extends||(w=function(t,e){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}))(D,S=o),D);function D(){return null!==S&&S.apply(this,arguments)||this}t.NgxCalendarModule=Y,t.CalendarComponent=b,t.Event=o,t.EventType=r,t.Session=M,t.ɵb=d,t.ɵa=y,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=romainmarecat-ngx-calendar.umd.min.js.map